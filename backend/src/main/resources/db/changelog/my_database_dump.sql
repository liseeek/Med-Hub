--
-- PostgreSQL database dump
--

-- Dumped from database version 16.1 (Debian 16.1-1.pgdg120+1)
-- Dumped by pg_dump version 16.1 (Debian 16.1-1.pgdg120+1)

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: set_default_availability(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.set_default_availability() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    INSERT INTO availability (doctor_id, day_of_week, start_time, end_time)
    VALUES (NEW.doctor_id, 1, TIME '10:00', TIME '18:00'),
           (NEW.doctor_id, 2, TIME '10:00', TIME '18:00'),
           (NEW.doctor_id, 3, TIME '10:00', TIME '18:00'),
           (NEW.doctor_id, 4, TIME '10:00', TIME '18:00'),
           (NEW.doctor_id, 5, TIME '10:00', TIME '18:00');

    RETURN NEW;
END;
$$;


ALTER FUNCTION public.set_default_availability() OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: appointments; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.appointments (
    appointment_id integer NOT NULL,
    user_id integer NOT NULL,
    doctor_id integer NOT NULL,
    appointment_date date NOT NULL,
    appointment_time time without time zone NOT NULL,
    location_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.appointments OWNER TO postgres;

--
-- Name: appointments_appointment_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.appointments ALTER COLUMN appointment_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.appointments_appointment_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: availability; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.availability (
    availability_id integer NOT NULL,
    doctor_id integer NOT NULL,
    day_of_week integer NOT NULL,
    start_time time without time zone NOT NULL,
    end_time time without time zone NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.availability OWNER TO postgres;

--
-- Name: availability_availability_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.availability ALTER COLUMN availability_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.availability_availability_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: databasechangelog; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.databasechangelog (
    id character varying(255) NOT NULL,
    author character varying(255) NOT NULL,
    filename character varying(255) NOT NULL,
    dateexecuted timestamp without time zone NOT NULL,
    orderexecuted integer NOT NULL,
    exectype character varying(10) NOT NULL,
    md5sum character varying(35),
    description character varying(255),
    comments character varying(255),
    tag character varying(255),
    liquibase character varying(20),
    contexts character varying(255),
    labels character varying(255),
    deployment_id character varying(10)
);


ALTER TABLE public.databasechangelog OWNER TO postgres;

--
-- Name: databasechangeloglock; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.databasechangeloglock (
    id integer NOT NULL,
    locked boolean NOT NULL,
    lockgranted timestamp without time zone,
    lockedby character varying(255)
);


ALTER TABLE public.databasechangeloglock OWNER TO postgres;

--
-- Name: doctors; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.doctors (
    doctor_id integer NOT NULL,
    name character varying(50) NOT NULL,
    surname character varying(50) NOT NULL,
    location_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    specialization_id bigint
);


ALTER TABLE public.doctors OWNER TO postgres;

--
-- Name: doctors_doctor_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.doctors ALTER COLUMN doctor_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.doctors_doctor_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: locations; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.locations (
    location_id integer NOT NULL,
    location_name character varying(255) NOT NULL,
    address character varying(255) NOT NULL,
    city character varying(50) NOT NULL,
    country character varying(50) NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.locations OWNER TO postgres;

--
-- Name: locations_location_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.locations ALTER COLUMN location_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.locations_location_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: roles; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.roles (
    role_id integer NOT NULL,
    name character varying(255) NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.roles OWNER TO postgres;

--
-- Name: roles_role_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.roles ALTER COLUMN role_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.roles_role_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: specializations; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.specializations (
    specialization_id integer NOT NULL,
    specialization_name character varying(255) NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.specializations OWNER TO postgres;

--
-- Name: specializations_specialization_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.specializations ALTER COLUMN specialization_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.specializations_specialization_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: user_role; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.user_role (
    user_role_id integer NOT NULL,
    user_id integer NOT NULL,
    role_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


ALTER TABLE public.user_role OWNER TO postgres;

--
-- Name: user_role_user_role_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.user_role_user_role_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.user_role_user_role_id_seq OWNER TO postgres;

--
-- Name: user_role_user_role_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.user_role_user_role_id_seq OWNED BY public.user_role.user_role_id;


--
-- Name: users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.users (
    user_id integer NOT NULL,
    name character varying(50) NOT NULL,
    surname character varying(50) NOT NULL,
    email character varying(50) NOT NULL,
    password character varying(255) NOT NULL,
    phone_number character varying(255) NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.users OWNER TO postgres;

--
-- Name: users_user_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.users ALTER COLUMN user_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.users_user_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: user_role user_role_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.user_role ALTER COLUMN user_role_id SET DEFAULT nextval('public.user_role_user_role_id_seq'::regclass);


--
-- Data for Name: appointments; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.appointments (appointment_id, user_id, doctor_id, appointment_date, appointment_time, location_id, created_at) FROM stdin;
1	1	2	2023-01-01	14:00:00	2	2024-01-25 00:06:44.176069
2	1	2	2023-01-01	14:00:00	3	2024-02-01 17:58:34.676285
4	1	2	2023-01-01	14:00:00	3	2024-02-01 21:26:46.723338
5	3	1	2024-02-01	14:00:00	2	2024-02-01 21:29:58.128973
9	3	5	2024-02-07	17:00:00	6	2024-02-02 02:19:28.295166
10	7	6	2024-02-05	16:00:00	7	2024-02-02 14:52:35.572072
\.


--
-- Data for Name: availability; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.availability (availability_id, doctor_id, day_of_week, start_time, end_time, created_at) FROM stdin;
1	1	1	10:00:00	18:00:00	2024-01-25 00:03:47.691894
2	1	2	10:00:00	18:00:00	2024-01-25 00:03:47.691894
3	1	3	10:00:00	18:00:00	2024-01-25 00:03:47.691894
4	1	4	10:00:00	18:00:00	2024-01-25 00:03:47.691894
5	1	5	10:00:00	18:00:00	2024-01-25 00:03:47.691894
6	2	1	10:00:00	18:00:00	2024-01-25 00:03:59.150185
7	2	2	10:00:00	18:00:00	2024-01-25 00:03:59.150185
8	2	3	10:00:00	18:00:00	2024-01-25 00:03:59.150185
9	2	4	10:00:00	18:00:00	2024-01-25 00:03:59.150185
10	2	5	10:00:00	18:00:00	2024-01-25 00:03:59.150185
11	3	1	10:00:00	18:00:00	2024-02-01 13:04:16.794666
12	3	2	10:00:00	18:00:00	2024-02-01 13:04:16.794666
13	3	3	10:00:00	18:00:00	2024-02-01 13:04:16.794666
14	3	4	10:00:00	18:00:00	2024-02-01 13:04:16.794666
15	3	5	10:00:00	18:00:00	2024-02-01 13:04:16.794666
16	4	1	10:00:00	18:00:00	2024-02-01 13:04:32.260264
17	4	2	10:00:00	18:00:00	2024-02-01 13:04:32.260264
18	4	3	10:00:00	18:00:00	2024-02-01 13:04:32.260264
19	4	4	10:00:00	18:00:00	2024-02-01 13:04:32.260264
20	4	5	10:00:00	18:00:00	2024-02-01 13:04:32.260264
21	5	1	10:00:00	18:00:00	2024-02-02 02:19:02.658613
22	5	2	10:00:00	18:00:00	2024-02-02 02:19:02.658613
23	5	3	10:00:00	18:00:00	2024-02-02 02:19:02.658613
24	5	4	10:00:00	18:00:00	2024-02-02 02:19:02.658613
25	5	5	10:00:00	18:00:00	2024-02-02 02:19:02.658613
26	6	1	10:00:00	18:00:00	2024-02-02 14:52:18.26354
27	6	2	10:00:00	18:00:00	2024-02-02 14:52:18.26354
28	6	3	10:00:00	18:00:00	2024-02-02 14:52:18.26354
29	6	4	10:00:00	18:00:00	2024-02-02 14:52:18.26354
30	6	5	10:00:00	18:00:00	2024-02-02 14:52:18.26354
\.


--
-- Data for Name: databasechangelog; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.databasechangelog (id, author, filename, dateexecuted, orderexecuted, exectype, md5sum, description, comments, tag, liquibase, contexts, labels, deployment_id) FROM stdin;
001	lissz	db/changelog/scripts/001-create-roles-table.xml	2024-01-25 00:02:27.026235	1	EXECUTED	9:eaf2b278aaf66bfed9b89e0f16f70f78	createTable tableName=roles; createIndex indexName=uindex_roles_name, tableName=roles		\N	4.23.0	\N	\N	6137346592
002	lissz	db/changelog/scripts/002-create-users-table.xml	2024-01-25 00:02:27.17833	2	EXECUTED	9:b973e865ca2a6363b7d09674cea2f65a	createTable tableName=users; createIndex indexName=uindex_users_email, tableName=users		\N	4.23.0	\N	\N	6137346592
003	lissz	db/changelog/scripts/003-create-specializations-table.xml	2024-01-25 00:02:27.232267	3	EXECUTED	9:2d07f77a5e6e51012e48ed95ae46c1dd	createTable tableName=specializations; createIndex indexName=uindex_specializations_specialization_name, tableName=specializations		\N	4.23.0	\N	\N	6137346592
004	lissz	db/changelog/scripts/004-create-locations-table.xml	2024-01-25 00:02:27.373432	4	EXECUTED	9:c5bcb783d0cda9fa1fafa4ccaac53526	createTable tableName=locations		\N	4.23.0	\N	\N	6137346592
005	lissz	db/changelog/scripts/005-create-doctors-table.xml	2024-01-25 00:02:27.441268	5	EXECUTED	9:10aab9568d36c38d2d506bd5f28f775a	createTable tableName=doctors; addForeignKeyConstraint baseTableName=doctors, constraintName=fk_location_id, referencedTableName=locations		\N	4.23.0	\N	\N	6137346592
006	lissz	db/changelog/scripts/007-create-availability-table.xml	2024-01-25 00:02:27.491988	6	EXECUTED	9:0e2b38dc678a522dfd690f3a5c328fcb	createTable tableName=availability; addForeignKeyConstraint baseTableName=availability, constraintName=fk_doctor_id, referencedTableName=doctors		\N	4.23.0	\N	\N	6137346592
007	lissz	db/changelog/scripts/008-create-appointments-table.xml	2024-01-25 00:02:27.580174	7	EXECUTED	9:27ea05db07939e6c600cbc1d4e66b35b	createTable tableName=appointments; addForeignKeyConstraint baseTableName=appointments, constraintName=fk_user_id, referencedTableName=users; addForeignKeyConstraint baseTableName=appointments, constraintName=fk_doctor_id, referencedTableName=doct...		\N	4.23.0	\N	\N	6137346592
008	lissz	db/changelog/scripts/009-create-procedure.xml	2024-01-25 00:02:27.742771	8	EXECUTED	9:c26b42fc6e409a655016641f2c085d15	createProcedure		\N	4.23.0	\N	\N	6137346592
009	lissz	db/changelog/scripts/010-create-trigger.xml	2024-01-25 00:02:27.899618	9	EXECUTED	9:8b667283dd27e98e10e937d9e9d79ea4	sql		\N	4.23.0	\N	\N	6137346592
\.


--
-- Data for Name: databasechangeloglock; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.databasechangeloglock (id, locked, lockgranted, lockedby) FROM stdin;
1	f	\N	\N
\.


--
-- Data for Name: doctors; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.doctors (doctor_id, name, surname, location_id, created_at, specialization_id) FROM stdin;
1	John	Doe	2	2024-01-25 00:03:47.691894	1
2	John	Doe	3	2024-01-25 00:03:59.150185	1
3	John	Doctor	4	2024-02-01 13:04:16.794666	4
4	John	Doctor	5	2024-02-01 13:04:32.260264	4
5	Doctor	Who	6	2024-02-02 02:19:02.658613	2
6	Kamila	Derlatka	7	2024-02-02 14:52:18.26354	6
\.


--
-- Data for Name: locations; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.locations (location_id, location_name, address, city, country, created_at) FROM stdin;
2	Central Hospital	1234 Main St	Springfield	USA	2024-01-25 00:03:47.691894
3	Central Hospital	1234 Main St	Springfield	USA	2024-01-25 00:03:59.150185
4	MaxMed	Kolejowa 12	Kazimierza Wielka	Poland	2024-02-01 13:04:16.794666
5	MaxMed	Kolejowa 12	Kazimierza Wielka	Poland	2024-02-01 13:04:32.260264
6	KrakMed	Landrynkowa 12	Cracow	Poland	2024-02-02 02:19:02.658613
7	MaxMed	Kolejowa 12	Kazimierza Wielka	Poland	2024-02-02 14:52:18.26354
\.


--
-- Data for Name: roles; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.roles (role_id, name, created_at) FROM stdin;
\.


--
-- Data for Name: specializations; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.specializations (specialization_id, specialization_name, created_at) FROM stdin;
1	Allergy and Immunology	2024-01-24 23:03:42.856367
2	Anesthesiology	2024-01-24 23:03:42.856367
3	Cardiology	2024-01-24 23:03:42.856367
4	Dermatology	2024-01-24 23:03:42.856367
5	Emergency Medicine	2024-01-24 23:03:42.856367
6	Endocrinology	2024-01-24 23:03:42.856367
7	Family Medicine	2024-01-24 23:03:42.856367
8	Gastroenterology	2024-01-24 23:03:42.856367
9	Geriatric Medicine	2024-01-24 23:03:42.856367
10	Hematology	2024-01-24 23:03:42.856367
11	Infectious Disease	2024-01-24 23:03:42.856367
12	Internal Medicine	2024-01-24 23:03:42.856367
13	Medical Genetics	2024-01-24 23:03:42.856367
14	Neonatology	2024-01-24 23:03:42.856367
15	Nephrology	2024-01-24 23:03:42.856367
16	Neurology	2024-01-24 23:03:42.856367
17	Obstetrics and Gynecology	2024-01-24 23:03:42.856367
18	Oncology	2024-01-24 23:03:42.856367
19	Ophthalmology	2024-01-24 23:03:42.856367
20	Orthopedics	2024-01-24 23:03:42.856367
21	Otolaryngology	2024-01-24 23:03:42.856367
22	Pathology	2024-01-24 23:03:42.856367
23	Pediatrics	2024-01-24 23:03:42.856367
24	Physical Medicine and Rehabilitation	2024-01-24 23:03:42.856367
25	Plastic Surgery	2024-01-24 23:03:42.856367
26	Psychiatry	2024-01-24 23:03:42.856367
27	Pulmonology	2024-01-24 23:03:42.856367
28	Radiology	2024-01-24 23:03:42.856367
29	Rheumatology	2024-01-24 23:03:42.856367
30	Sports Medicine	2024-01-24 23:03:42.856367
31	Surgery	2024-01-24 23:03:42.856367
32	Urology	2024-01-24 23:03:42.856367
\.


--
-- Data for Name: user_role; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.user_role (user_role_id, user_id, role_id, created_at) FROM stdin;
\.


--
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.users (user_id, name, surname, email, password, phone_number, created_at) FROM stdin;
1	Jan	Kowalski	kowalski99@gmail.com	Password1$	514098754	2024-01-25 00:03:02.51284
3	Jan	Kowalski	kowalski9@gmail.com	$2a$10$yehx0WdxBX9iDd1vKjIdt.0e7SPCHNtSrcEEXq7wWxs9.Sa/FedEC	514098754	2024-01-28 20:36:27.638596
4	Jan	Kowalski	kowalski999@gmail.com	$2a$10$4ocXA6oziXS1No8Ubn2OMeijyS9cqRQIDA2NFPYVdf9EVRttHe01W	514098754	2024-01-28 21:57:48.351106
5	Szymon	Lis	lisszymon.contact@gmail.com	$2a$10$pvo1512iRZ/7BZeWXJt4zO66Xwqp1rGx5Mu9nv6DrBhVlU.LmcyOq	514098754	2024-01-31 22:50:25.910527
6	Example	Example	example@example.com	$2a$10$3Va.g.Kp//n7ZjMM0n56iuQ/FT.7EfMgt66Evm.4shahBV3BYmGXW	500500500	2024-01-31 22:54:14.742206
7	Tomasz	Lis	tomaszlis@gmail.com	$2a$10$hDI/588T.iJebfbSaWm2w.K8j.UZ.uhLCTTaOdACHfcdNi7pi45UC	514098754	2024-02-02 14:51:05.004673
\.


--
-- Name: appointments_appointment_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.appointments_appointment_id_seq', 10, true);


--
-- Name: availability_availability_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.availability_availability_id_seq', 30, true);


--
-- Name: doctors_doctor_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.doctors_doctor_id_seq', 6, true);


--
-- Name: locations_location_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.locations_location_id_seq', 7, true);


--
-- Name: roles_role_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.roles_role_id_seq', 1, false);


--
-- Name: specializations_specialization_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.specializations_specialization_id_seq', 33, true);


--
-- Name: user_role_user_role_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.user_role_user_role_id_seq', 1, false);


--
-- Name: users_user_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.users_user_id_seq', 7, true);


--
-- Name: appointments appointments_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.appointments
    ADD CONSTRAINT appointments_pkey PRIMARY KEY (appointment_id);


--
-- Name: availability availability_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.availability
    ADD CONSTRAINT availability_pkey PRIMARY KEY (availability_id);


--
-- Name: databasechangeloglock databasechangeloglock_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.databasechangeloglock
    ADD CONSTRAINT databasechangeloglock_pkey PRIMARY KEY (id);


--
-- Name: doctors doctors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.doctors
    ADD CONSTRAINT doctors_pkey PRIMARY KEY (doctor_id);


--
-- Name: locations locations_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.locations
    ADD CONSTRAINT locations_pkey PRIMARY KEY (location_id);


--
-- Name: roles roles_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.roles
    ADD CONSTRAINT roles_pkey PRIMARY KEY (role_id);


--
-- Name: specializations specializations_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.specializations
    ADD CONSTRAINT specializations_pkey PRIMARY KEY (specialization_id);


--
-- Name: user_role user_role_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.user_role
    ADD CONSTRAINT user_role_pkey PRIMARY KEY (user_role_id);


--
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (user_id);


--
-- Name: uindex_roles_name; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX uindex_roles_name ON public.roles USING btree (name);


--
-- Name: uindex_specializations_specialization_name; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX uindex_specializations_specialization_name ON public.specializations USING btree (specialization_name);


--
-- Name: uindex_users_email; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX uindex_users_email ON public.users USING btree (email);


--
-- Name: doctors set_default_availability_trigger; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER set_default_availability_trigger AFTER INSERT ON public.doctors FOR EACH ROW EXECUTE FUNCTION public.set_default_availability();


--
-- Name: availability fk_doctor_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.availability
    ADD CONSTRAINT fk_doctor_id FOREIGN KEY (doctor_id) REFERENCES public.doctors(doctor_id);


--
-- Name: appointments fk_doctor_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.appointments
    ADD CONSTRAINT fk_doctor_id FOREIGN KEY (doctor_id) REFERENCES public.doctors(doctor_id);


--
-- Name: doctors fk_location_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.doctors
    ADD CONSTRAINT fk_location_id FOREIGN KEY (location_id) REFERENCES public.locations(location_id);


--
-- Name: appointments fk_location_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.appointments
    ADD CONSTRAINT fk_location_id FOREIGN KEY (location_id) REFERENCES public.locations(location_id);


--
-- Name: doctors fk_specialization; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.doctors
    ADD CONSTRAINT fk_specialization FOREIGN KEY (specialization_id) REFERENCES public.specializations(specialization_id);


--
-- Name: appointments fk_user_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.appointments
    ADD CONSTRAINT fk_user_id FOREIGN KEY (user_id) REFERENCES public.users(user_id);


--
-- Name: user_role user_role_role_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.user_role
    ADD CONSTRAINT user_role_role_id_fkey FOREIGN KEY (role_id) REFERENCES public.roles(role_id);


--
-- Name: user_role user_role_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.user_role
    ADD CONSTRAINT user_role_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(user_id);


--
-- PostgreSQL database dump complete
--

